  id: Isa_create
  name: Create NEW ISA compliant Study Metadata
  description: a Galaxy tool to bootstrap creation of experimental metadata in ISA format based on key study design information 
  title_default: "Describe your metabolomics study with ISA"
  
    
  steps:
 
      - title: "Getting ISACreate Galaxy tool"
        element: 'a[href$="/tool_runner?tool_id=isa_create_metabo"]' 
        content: "This short tour will guide you through <b>Generating a standard compliant study report leveraging study design information</b>. This short tour will guide you creating an <b>ISA format compliant</b> document describing your experiment, making it ready for preregistration or deposition with EMBL-EBI Metabolights. You can navigate with your arrow keys and leave the tour at any time point with 'Escape' or the 'End tour' button."
        position: right
        backdrop: true
        postclick:
           - "#title_isa > a > span"      

      - title: "Create Study Description"
        element: '#title_isa > a > span' 
        content: "We start by invoking the <i><b>Create ISA in Galaxy</b></i> tool from the tools list"
        position: right
        preclick:           
            - '.isacreator_metabo > span:nth-child(2)'
        postclick:
            - "#uid-7 > div.portlet-header > div.portlet-title > span"   
            #- "#isa > div.toolTitle > div > a"

      - title: "Provide General Study Information"
        element: "#uid-7 > div.portlet-header > div.portlet-title > span" 
        content: "The <b>Study Description</b> section is here to allow you to report basic metadata about the study."
        position: right
        #preclick:
        #  - "#uid-7 > div.portlet-header > div.portlet-title > span"

      - title: "Provide General Study Information: title"
        element: "#field-uid-10"
        content: "The <b>Study Title</b> field to provide a snappy summary of the study"
        position: right 
        textinsert: |
          Urine metabolomics insight into acute kidney injury point to oxidative stress disruptions in energy generation and H2S availability.
        postclick:
          - "#field-uid-10"

      - title: "Provide General Study Information: description"
        element: "#field-uid-11"
        content: "The <b>Study Description</b> field allows the supply of key information about study authors as well as a textual overview of the study, its goals, its techniques, its key variables in <u>free text form</u>."
        position: "right" 
        textinsert: |
          The urinary metabolome reflects AKI evolution and severity of injury. Kidney transcriptomics revealed enzymatic expression changes. Enzymatic expression changes may be the potentially underlying cause of changes in urine metabolites. Identified metabolite changes link oxidative stress, energy generation, and H2S availability to AKI
        postclick:
          - "#field-uid-11"

      - title: "Provide General Study Information: PI first name"
        element: '#field-uid-12'
        content: "Provide the principal investigator's first name"
        placement: right
        textinsert: |
          Guillermo
        postclick: 
          - "#field-uid-12"

      - title: "Provide General Study Information: PI last name"
        element: '#field-uid-13'
        content: "Provide the principal investigator's last name"
        placement: right
        textinsert: |
          Alvarez-Llamas
        postclick: 
          - "#field-uid-13"

      - title: "Provide General Study Information: PI email"
        element: '#field-uid-14'
        content: "Provide the principal investigator's email address"
        placement: right
        textinsert: |
          galvarez@fjd.es
        postclick: 
          - "#field-uid-14"

      - title: "Provide General Study Information: PI affiliation"
        element: '#field-uid-15'
        content: "Provide the principal investigator's affiliation information"
        placement: right
        textinsert: |
          Department of Immunology
        postclick: 
          - "#field-uid-15"

      - title: "Provide General Study Information: consent"
        element: '#field-uid-16 > div.icon-dropdown.fa.fa-caret-down'
        content: 'All clinical studies should indicate the nature of consent give. To do this, select a term from the Data Use Ontology (DUO), vetted by GA4GH group'
        placement: right
        preclick: 
          - "#field-uid-16 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Provide General Study Information: terms of use"
        element: '#field-uid-18 > div.icon-dropdown.fa.fa-caret-down'
        content: 'All clinical studies should indicate the terms of use for research datasets. To do this, select a term from the Data Use Ontology (DUO), vetted by GA4GH group'
        placement: right
        preclick: 
          - "#field-uid-18 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Define the plan of treatments"
        element: "#uid-20 > div.portlet-header > div.portlet-title > span"
        intro: "The <b>Treatment Plan</b> section is meant to explicitly declare the study independent variables (predictors variables) and their range of values."
        placement: right
        postclick:
          - "#uid-20 > div.portlet-header > div.portlet-title > span"

      - title: "Define the plan of treatments: design type"
        element: "#field-uid-23 > div.icon-dropdown.fa.fa-caret-down" 
        intro: "This field is there for you to tell whether you are running a factorial design (complete or partial) in the context of observational study or an intervention study, i.e. where the operator considers introducing a perturbation in the biological system under study. Note that the behavior of the tool will be altered if working under full or fractional factorial design assumptions. This tour only shows the behavior of the tool assuming full factorial design."
        placement: right
        preclick:
          - "#field-uid-23 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Define the plan of treatments: single or repeat intervention"
        element: "#field-uid-47 > div.icon-dropdown.fa.fa-caret-down"
        intro: "Specify here if more than one intervention is applied to study subjects (repeated treatments, where treatments are applied in sequence), a number of different perturbations or interventions may be reported. The tool allows to describe those in a consistent, structured way."
        placement: right
        preclick:
          - "#field-uid-47 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Define the plan of treatments: nature of intervention"
        element: "#field-uid-49 > div.icon-dropdown.fa.fa-caret-down"
        intro: "Select the nature of intervention/perturbation from the list, the values are organized based on the type of stress agent considered."
        placement: right
        postclick:
          - "#field-uid-49 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Define the plan of treatments: agent"
        element: "#field-uid-51"
        intro: "provide the various levels for perturbation agent (treated as independent variable) using a comma (,) as a separator. For example, 'dexamethasone,diclofenac,artemisin'"
        placement: right
        textinsert: |
          dexamethasone,diclofenac,artemisin
        postclick:
          - "#field-uid-51"

      - title: "Define the plan of treatments: intensity"
        element: "#field-uid-52"
        intro: "provide the various levels of intensity (treated as independent variable) using a comma (,) as a separator. For example, 'low dose,medium dose,high dose'"
        placement: right
        textinsert: |
          low dose,medium dose,high dose
        postclick:
          - "#field-uid-52"          

      - title: "Define the plan of treatments: duration"
        element: "#field-uid-53"
        intro: "provide the various time points or duration (e.g. elapsed time post exposure) (treated as independent variable) using a comma (,) as a separator. For example, '1 min,2 min,15 min,240 min'"
        placement: right
        textinsert: |
          1 min,2 min,15 min,240 min
        postclick:
          - "#field-uid-53" 

      - title: "Define the plan of treatments: number of experimental units"
        element: "#field-uid-66"
        intro: "Specifiy the number of biological replicates for each treatment group (in other words, report the number of experimental units per conditions)"
        placement: right
        textinsert: |
          2
        postclick:
          - "#field-uid-66"

      - title: "Define the plan of assay modalities and data acquisitions"
        element: "#uid-72 > div.portlet-header > div.portlet-title > span"
        intro: "Indicate if all study groups have the same number of experimental units or not."
        placement: right
        postclick:
          - "#uid-72 > div.portlet-header > div.portlet-title > span"          

      # - title: "Define the plan of treatments"
      #   element: "#field-uid-43 > input"
      #   intro: "This field should be used to set the number of biological replicates per treatment conditions. If the study design is <i>balanced</i>, it will be the same for all treatment groups computed based on the variable declarations. Otherwise (unbalanced), each group size will have to be set"
      #   placement: "right"
      #   postclick:
      #     - "#field-uid-43 > input"

      # - title: "Define the sample collection and assay plans"
      #   element: "#uid-45 > div.portlet-header > div.portlet-title > span"
      #   intro: "This section is meant for you to declare the <u>response variables</u> and identify which <u>biological materials</u> collected over the course of the study will be used as <u>input</u> to the data acquisition process."
      #   placement: "right"
      #   postclick:
      #     - "#uid-45 > div.portlet-header > div.portlet-title > span"

      - title: "Define the sample collection and assay plans"
        element: "#uid-76 > div > span"
        intro: "Press the <i>insert Sampling plan</i> button to reveal the required fields, select the values and specify the parameters matching your experimental set up. Repeat for each of the biological specimen types collected over the course of the study"
        placement: right
        postclick:
          - "#uid-76 > div > span"

      - title: "Define the sample collection and assay plans: sample type"
        element: "#field-uid-84 > div.icon-dropdown.fa.fa-caret-down"
        intro: "Select from relevant entry from the list of controlled terms provided to describe the type of biological specimen. These are values most frequently used but one may provide user defined values when the core terms provide insufficient coverage."
        placement: right
        preclick:
          - "#field-uid-84 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Define the sample collection and assay plans: number of specimens per sample type"
        element: "#field-uid-86"
        intro: "This field has default value of 1, indicating that one sample of the type defined above would be collected over the course of the study for each of the study subjects. In case of longitudinal studies, repeated sampling is performed therefore modify the value to match the total number collected for that sample type."
        placement: right      
        postclick:
          - "#field-uid-86"

      - title: "Define the sample collection and assay plans"
        element: "#uid-89 > div > span"
        intro: "Press the <i>insert Assay Plan</i> button to reveal the required fields, select the values and specify the parameters matching your experimental set up. Repeat for each of the data acquisition types defined by the study."
        placement: right
        postclick:
          - "#uid-89 > div > span"          

      - title: "Define the sample collection and assay plans"
        element: "#field-uid-94 > div.icon-dropdown.fa.fa-caret-down"  
        intro: "Select either 'mass spectrometry' or 'nmr spectroscopy' from the dropdown list thus setting the technology type for the data acquisition. IMPORTANT: Repeat as many times as necessary in order to define which techniques will be used to characterise any of the sample/specimens collected over the course of the study"
        placement: right
        postclick:
          - "#field-uid-94 > div.icon-dropdown.fa.fa-caret-down"  


      - title: "Define the sample collection and assay plans"
        element: "#uid-97 > div > span"
        intro: "Press the <i>insert sample fractions</i> button to reveal the required fields, and select the suitable <i>elements</i> available from the dropdown list. This is specific to Mass spectrometry and allows to report on the type of fraction being considered."
        placement: right
        postclick:
          - "#uid-97 > div > span"

      - title: "Define the sample collection and assay plans"
        element: "#field-uid-141 > div.icon-dropdown.fa.fa-caret-down"
        intro: "choose between polar or non-polar fraction"
        placement: right
        preclick:
          - "#field-uid-141 > div.icon-dropdown.fa.fa-caret-down"
  
      - title: "Define the sample collection and assay plans"
        element: "#uid-99 > div > span"
        intro: "Press the <i>insert injection series</i> button to reveal the required fields, and select to relevant settings describing the data acquisition conditions. The values varies depending on the techniques used. The controlled terms are curated values vetted by EMBL-EBI Metabolights"
        placement: right
        postclick:
          - "#uid-99 > div > span"    

      - title: "Define the sample collection and assay plans: sample introduction method"
        element: "#field-uid-147 > div.icon-dropdown.fa.fa-caret-down"
        intro: "Use this field to select the type of sample introduction used in the mass spectrometer. Depending on the values selected, the requirements will be adjusted according. For instance selecting LC or GC will require supplying information about chromatography components"
        placement: right
        preclick:
          - "#field-uid-147 > div.icon-dropdown.fa.fa-caret-down" 

      - title: "Define the sample collection and assay plans: MS instrument"
        element: "#field-uid-153 > div.icon-dropdown.fa.fa-caret-down"
        intro: "Use this field to select the type of MS instrument used in this data acquisition. The default value is set to </i>'not reported'. All the values in the dropdown list are curated values obtained from EMBL-EBI Metabolights</i>"
        placement: right
        postclick:
          - "#field-uid-153 > div.icon-dropdown.fa.fa-caret-down"  

      - title: "Define the sample collection and assay plans"
        element: "#uid-156 > div > span" 
        intro: "Once all the hardware descriptions have been reported, it is time to specify how many actual acquisitions were run and in which acquisition modes. Press the <i>insert acquisition series</i> button to reveal the required fields"
        placement: right
        postclick:
          - "#uid-156 > div > span" 

      - title: "Define the sample collection and assay plans"
        element: "#field-uid-177 > div.icon-dropdown.fa.fa-caret-down"
        intro: "Use to dropdown list to indicate a positive or negative acquisition type"
        placement: right
        preclick:
          - "#field-uid-177 > div.icon-dropdown.fa.fa-caret-down"

      - title: "Define the sample collection and assay plans"
        element: "#field-uid-179 > input"
        intro: "Specify how many technical repeats for this acquisition conditions were performed"
        placement: right
        textinsert: |
          "2" 
        postclick:
          - "#field-uid-179 > input"                      

      - title: "Define the quality control plans"
        element: "#uid-50 > div.portlet-header > div.portlet-title > span"
        intro: "This section is meant to allow reporting the type and frequency of measurements made on known material for quality assurance and quality control purpose. The controlled terms are vetted by the Metabolomics Standardization Initiative (MSI) and available from the MSI Application Ontology."
        placement: right
        postclick:
          - "#uid-50 > div.portlet-header > div.portlet-title > span" 

      - title: "Define the quality control plans"
        element: "#uid-77 > div.portlet-header > div.portlet-title > span"
        intro: "Press the <i>Insert  Quality Control / Quality Assurance Plan</i> button to reveal the required fields to report quality control elements."
        placement: right
        postclick:
          - "#uid-77 > div.portlet-header > div.portlet-title > span"

      - title: "Define the qc collection"
        element: "#uid-81 > div > span" 
        intro: " Press the <i>insert acquisition series</i> button to reveal the required fields"
        placement: right
        postclick:
          - "#uid-81 > div > span" 

      - title: "Define the quality control plans"
        element: "#field-uid-149 > div.icon-dropdown.fa.fa-caret-down"
        intro: "This section is meant to allow reporting the type and frequency of measurements made on known material for quality assurance and quality control purpose."
        placement: right
        preclick:
          - "#field-uid-149 > div.icon-dropdown.fa.fa-caret-down"
          
      - title: "Define the quality control plans"
        element: "#field-uid-151 > input"
        intro: "Following the selection of the QC type, indicate the number of consecutive injections of that type according to the QC plan."
        placement: right
        postclick:
          - "#field-uid-151 > input"

      - title: "Define the quality control plans"
        element: "#field-uid-153 > input"
        intro: "Following the selection of the QC type, indicate the frequency of injections of that type according to the QC plan, as in '1 qc run every 10 sample runs'."
        placement: right
        textinsert: |
          "5" 
        postclick:
          - "#field-uid-153 > input"          

      - title: "running the metadata creator"
        element: "#execute"
        intro: "hit the button to launch the job"
        position: right
        postclick:
          - "#execute"


      - title: "Enjoy Galaxy in PhenoMenal"
        intro: "Thanks for taking this tour! Happy research with Galaxy and PhenoMenal!"